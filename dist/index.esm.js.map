{"version":3,"file":"index.esm.js","sources":["../src/sql/decorators.ts","../src/sql/types.ts","../src/sql/vector-operations.ts","../src/sql/operations.ts","../src/sql/transaction.ts","../src/sql/migration.ts","../src/sql/run-migration.ts"],"sourcesContent":[null,null,null,null,null,null,null],"names":["columnsMetadata","WeakMap","foreignKeysMetadata","vectorColumnsMetadata","Table","options","target","context","undefined","constructor","Reflect","defineMetadata","name","has","set","get","value","tableDecorator","toSnakeCase","str","replace","toLowerCase","Column","propertyKey","metadata","sqlType","type","inferredType","getMetadata","inferType","valueType","includes","Date","Array","isArray","error","inferTypeFromValue","primary","nullable","unique","default","ForeignKey","tableName","columnName","VectorColumn","dimensions","columns","isVector","vectorColumns","pool","formatVector","vector","Error","join","ensureVectorDimensions","length","console","warn","slice","fill","processVectorEmbeddings","entity","entityClass","key","Object","entries","adjustedVector","async","storeEmbedding","entryId","embedding","client","adjustedEmbedding","formattedVector","localClient","shouldReleaseClient","Pool","connect","query","rowCount","existingEmbedding","id","rows","uuidv4","release","findSimilarEntries","limit","similarityThreshold","map","row","entry_id","similarity","findBy","criteria","getAllColumnsFromHierarchy","conditions","values","paramIndex","meta","push","result","assign","mapRowToEntity","listAll","sql","params","paramMap","match","convertNamedParams","save","crypto","randomUUID","createdAt","updatedAt","columnNames","placeholders","setExpressions","deleteBy","snakeCaseKey","proto","getPrototypeOf","parentColumns","withTransaction","callback","existingClient","withSavepoint","quoteIdentifier","identifier","test","escapeSqlString","isSqlFunction","loadEntityClasses","entityClasses","entitiesDir","path","process","cwd","files","fs","readdirSync","withFileTypes","file","isDirectory","endsWith","filePath","module","import","exportName","keys","exportedItem","hasMetadata","getCurrentSchema","schema","tablesResult","table","table_name","primaryKey","foreignKeys","indexes","columnsResult","primaryKeyResult","attname","foreignKeysResult","uniqueResult","uniqueColumn","column","find","col","column_name","is_unique","indexesResult","generateTableSQL","includeForeignKeys","columnDefinitions","primaryKeyColumns","columnMetadata","columnDef","defaultValue","startsWith","arrayContent","substring","split","item","trimmed","trim","JSON","stringify","primaryKeyDef","fkMetadata","columnMeta","fkDef","currentClass","prototype","generateAlterTableSQL","tableInfo","existingColumn","modifications","is_nullable","data_type","fk","foreign_table_name","foreign_column_name","generateForeignKeySQL","currentSchema","constraintName","some","generateMigrationSQL","alterSql","require","register","project","transpileOnly","compilerOptions","e","log","runMigration","dryRun","shouldClosePool","migrationSql","env","DATABASE_URL","connectionString","ensureVectorExtension","end","dotenv","config","main","catch","exit"],"mappings":"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"}