{"version":3,"file":"index.esm.js","sources":["../src/sql/decorators.ts","../src/sql/types.ts","../src/sql/vector-operations.ts","../src/sql/operations.ts","../src/sql/transaction.ts","../src/sql/migration.ts","../src/sql/run-migration.ts"],"sourcesContent":[null,null,null,null,null,null,null],"names":["columnsMetadata","WeakMap","foreignKeysMetadata","vectorColumnsMetadata","Table","options","constructor","Reflect","defineMetadata","name","has","set","get","Column","target","propertyKey","metadata","sqlType","type","inferredType","getMetadata","inferType","valueType","value","toLowerCase","includes","Date","Array","isArray","error","inferTypeFromValue","primary","nullable","unique","default","ForeignKey","tableName","columnName","VectorColumn","dimensions","columns","str","replace","letter","isVector","vectorColumns","pool","Pool","connectionString","process","env","DATABASE_URL","formatVector","vector","Error","join","ensureVectorDimensions","length","console","warn","slice","fill","processVectorEmbeddings","entity","entityClass","key","Object","entries","adjustedVector","async","storeEmbedding","entryId","embedding","client","adjustedEmbedding","formattedVector","localClient","shouldReleaseClient","connect","query","rowCount","existingEmbedding","id","rows","uuidv4","release","findSimilarEntries","limit","similarityThreshold","map","row","entry_id","similarity","findBy","criteria","getAllColumnsFromHierarchy","conditions","values","paramIndex","undefined","meta","push","result","assign","mapRowToEntity","listAll","sql","params","paramMap","match","convertNamedParams","save","crypto","randomUUID","createdAt","updatedAt","columnNames","placeholders","setExpressions","deleteBy","snakeCaseKey","proto","getPrototypeOf","parentColumns","withTransaction","callback","existingClient","withSavepoint","quoteIdentifier","identifier","test","escapeSqlString","isSqlFunction","loadEntityClasses","entityClasses","entitiesDir","path","cwd","files","fs","readdirSync","withFileTypes","file","isDirectory","endsWith","filePath","module","import","exportName","keys","exportedItem","hasMetadata","getCurrentSchema","schema","tablesResult","table","table_name","primaryKey","foreignKeys","indexes","columnsResult","primaryKeyResult","attname","foreignKeysResult","uniqueResult","uniqueColumn","column","find","col","column_name","is_unique","indexesResult","generateTableSQL","includeForeignKeys","columnDefinitions","primaryKeyColumns","columnMetadata","columnDef","defaultValue","startsWith","arrayContent","substring","split","item","trimmed","trim","JSON","stringify","primaryKeyDef","fkMetadata","fkDef","currentClass","prototype","generateAlterTableSQL","tableInfo","existingColumn","modifications","is_nullable","data_type","fk","foreign_table_name","foreign_column_name","generateForeignKeySQL","currentSchema","constraintName","some","generateMigrationSQL","alterSql","require","register","project","transpileOnly","compilerOptions","e","log","runMigration","dryRun","exit","ensureVectorExtension","end","dotenv","config","main","catch"],"mappings":"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CAoH,EACApD,GAEA,UAEQA,EAAOM,MAAM,aAAatE,KAGhC,MAAM6F,QAAeuB,IAKrB,aAFMpD,EAAOM,MAAM,qBAAqBtE,KAEjC6F,CACR,CAAC,MAAOzE,GAGP,YADM4C,EAAOM,MAAM,yBAAyBtE,KACtCoB,CACP,CACH,CChDM,SAAUmG,EAAgBC,GAwG9B,MAtGyB,CACvB,MACA,UACA,UACA,MACA,MACA,QACA,KACA,MACA,aACA,gBACA,SACA,OACA,OACA,OACA,QACA,UACA,SACA,aACA,SACA,QACA,kBACA,eACA,eACA,iBACA,eACA,oBACA,eACA,UACA,aACA,OACA,WACA,KACA,OACA,MACA,SACA,QACA,QACA,MACA,UACA,SACA,OACA,OACA,QACA,QACA,SACA,QACA,KACA,YACA,QACA,YACA,OACA,KACA,SACA,OACA,UACA,UACA,OACA,OACA,QACA,YACA,iBACA,UACA,MACA,UACA,OACA,SACA,KACA,OACA,KACA,QACA,QACA,WACA,UACA,UACA,aACA,YACA,QACA,SACA,eACA,UACA,OACA,YACA,QACA,cACA,OACA,KACA,WACA,OACA,QACA,SACA,OACA,QACA,WACA,UACA,OACA,QACA,SACA,QAKiBxG,SAASwG,EAAWzG,gBACrC,gBAAgB0G,KAAKD,IACrB,SAASC,KAAKD,GAEP,IAAIA,KAGNA,CACT,CAKM,SAAUE,EAAgB5G,GAC9B,MAAO,IAAIA,EAAMmB,QAAQ,KAAM,QACjC,CAKM,SAAU0F,EAAc7G,GAC5B,MAAqB,iBAAVA,GAGJ,wBAAwB2G,KAAK3G,EACtC,CAKO8C,eAAegE,IACpB,MAAMC,EAAuB,GAGvBC,EAAcC,EAAKjF,KAAKN,QAAQwF,MAAO,KAAM,YAEnD,IAEE,MAAMC,EAAQC,EAAGC,YAAYL,EAAa,CAAEM,eAAe,IAG3D,IAAK,MAAMC,KAAQJ,EAEjB,IAAII,EAAKC,gBAKJD,EAAKrI,KAAKuI,SAAS,QAAWF,EAAKrI,KAAKuI,SAAS,QAItD,IAEE,MAAMC,EAAWT,EAAKjF,KAAKgF,EAAaO,EAAKrI,MACvCyI,QAAeC,OAAOF,GAG5B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"}